<app-header></app-header>
<div class="container mt-5">
  <form [formGroup]="patientForm" (ngSubmit)="savePatientDetails()" class="patient-form">
    <mat-card>
      <div class="form-group">
        <h1 class="text-center">
          <i class="fa fa-address-card" aria-hidden="true" style="color: #ea4c46;"></i>&nbsp; &nbsp;Patient Details
        </h1>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label for="Name" class="font-weight-bold">Name:</label>
            <input type="text" id="Name" class="form-control" placeholder="Enter Patient Name" name="name" formControlName="patient_name" />
            <div *ngIf="patientForm.get('patient_name')?.invalid && (patientForm.get('patient_name')?.dirty || patientForm.get('patient_name')?.touched)" class="text-danger">
              <div *ngIf="patientForm.get('patient_name')?.errors?.['required']">Patient name is required.</div>
              <div *ngIf="patientForm.get('patient_name')?.errors?.['minlength']">Patient name should be at least 3 characters long.</div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="form-group">
            <label for="BloodGroup" class="font-weight-bold">Blood Group:</label>
            <select class="form-control" name="BloodGroup" formControlName="blood_group_type">
              <option value="" [selected]="true">---Select Blood Group---</option>
              <option *ngFor="let group of blood" value="{{group.blood_group_type}}">{{group.blood_group_type}}</option>
            </select>
            <div *ngIf="patientForm.get('blood_group')?.invalid && (patientForm.get('blood_group')?.dirty || patientForm.get('blood_group')?.touched)" class="text-danger">
              Blood group is required.
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label for="age" class="font-weight-bold">Age:</label>
            <input type="text" class="form-control" id="age" placeholder="Enter age between 18-60" name="age" formControlName="age" />
            <div *ngIf="patientForm.get('age')?.invalid && (patientForm.get('age')?.dirty || patientForm.get('age')?.touched)" class="text-danger">
              Age is required.
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="form-group">
            <label for="PhoneNumber" class="font-weight-bold">Contact Number:</label>
            <input type="tel" class="form-control" id="ContactNumber" placeholder="Enter Contact number" name="contact_number" formControlName="contact_number" />
            <div *ngIf="patientForm.get('contact_number')?.invalid && (patientForm.get('contact_number')?.dirty || patientForm.get('contact_number')?.touched)" class="text-danger">
              <div *ngIf="patientForm.get('contact_number')?.errors?.['required']">Contact number is required.</div>
              <div *ngIf="patientForm.get('contact_number')?.errors?.['pattern']">Contact number should be a 10-digit number.</div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label class="font-weight-bold">City:</label><br>
            <select id="city" name="city" formControlName="city" class="form-control">
              <option value="" [selected]="true">---Select City---</option>
              <option *ngFor="let location of cities" value="{{location}}">{{location}}</option>
            </select>
            <div *ngIf="patientForm.get('city')?.invalid && (patientForm.get('city')?.dirty || patientForm.get('city')?.touched)" class="text-danger">
              City is required.
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="form-group">
            <label class="font-weight-bold">Gender:</label><br>
            <select class="form-control" name="gender" formControlName="gender">
              <option value="">Select Gender</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
            </select>
            <div *ngIf="patientForm.get('gender')?.invalid && (patientForm.get('gender')?.dirty || patientForm.get('gender')?.touched)" class="text-danger">
              Gender is required.
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label class="font-weight-bold">Area:</label><br>
            <select id="area" name="area" formControlName="area" class="form-control">
              <option value="" [selected]="true">Select Area</option>
              <option *ngFor="let location of area" value="{{location}}">{{location}}</option>
            </select>
            <div *ngIf="patientForm.get('area')?.invalid && (patientForm.get('area')?.dirty || patientForm.get('area')?.touched)" class="text-danger">
              Area is required.
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="form-group">
            <label for="HospitalName" class="font-weight-bold">Hospital Name:</label>
            <input class="form-control" type="text" id="hospital_name" placeholder="Enter Hospital Name" name="hospital_name" formControlName="hospital_name" />
            <div *ngIf="patientForm.get('hospital_name')?.invalid && (patientForm.get('hospital_name')?.dirty || patientForm.get('hospital_name')?.touched)" class="text-danger">
              <div *ngIf="patientForm.get('hospital_name')?.errors?.['required']">Hospital name is required.</div>
              <div *ngIf="patientForm.get('hospital_name')?.errors?.['minlength']">Hospital name should be at least 4 characters long.</div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label for="units_required" class="font-weight-bold">Units Required:</label>
            <input class="form-control" type="number" id="units_required" placeholder="Enter Units" name="units_required" formControlName="units_required" />
            <div *ngIf="patientForm.get('units_required')?.invalid && (patientForm.get('units_required')?.dirty || patientForm.get('units_required')?.touched)" class="text-danger">
              <div *ngIf="patientForm.get('units_required')?.errors?.['required']">Units required is required.</div>
              <div *ngIf="patientForm.get('units_required')?.errors?.['pattern']">Units required should be a positive number.</div>
            </div>
          </div>
        </div>
      </div>

      <div class="text-center">
        <button class="btn btn-success btn-sm">Save</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <button type="button" class="btn btn-danger btn-sm" (click)="resetForm()">Reset</button>
        <button type="button" class="btn btn-warning btn-sm ms-3" (click)="backForm()">Back</button>
      </div>
    </mat-card>
  </form>
</div>
